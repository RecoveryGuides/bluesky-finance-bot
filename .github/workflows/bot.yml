name: ğŸ¤– Smart Bot

on:
  schedule:
    - cron: '20 */2 * * *'  # Co 2 godziny
  workflow_dispatch:

jobs:
  run:
    runs-on: ubuntu-latest
    timeout-minutes: 5
    
    steps:
    - name: ğŸ“¥ Checkout
      uses: actions/checkout@v4
    
    - name: ğŸ Setup Python
      uses: actions/setup-python@v4
      with:
        python-version: '3.10'
    
    - name: ğŸ“¦ Install dependencies
      run: pip install -r requirements.txt
    
    - name: ğŸ¤– Run bot
      env:
        BLUESKY_HANDLE: ${{ secrets.BLUESKY_HANDLE }}
        BLUESKY_PASSWORD: ${{ secrets.BLUESKY_PASSWORD }}
      run: python bot.py
    
    - name: ğŸ’¾ Save data
      if: always()
      uses: actions/upload-artifact@v4
      with:
        name: bot-data
        path: |
          stats.json
          history.json
          authors.json
        retention-days: 30
