name: ğŸ¯ Finance Growth Bot

on:
  schedule:
    # USA prime time (9 AM, 1 PM, 5 PM EST)
    - cron: '0 14 * * *'  # 9 AM EST = 14:00 UTC
    - cron: '0 18 * * *'  # 1 PM EST = 18:00 UTC
    - cron: '0 22 * * *'  # 5 PM EST = 22:00 UTC
  workflow_dispatch:  # RÄ™czne uruchomienie

jobs:
  run-bot:
    runs-on: ubuntu-latest
    timeout-minutes: 15
    
    steps:
    - name: ğŸ“¥ Pobierz kod
      uses: actions/checkout@v4
    
    - name: ğŸ Ustaw Pythona
      uses: actions/setup-python@v4
      with:
        python-version: '3.10'
    
    - name: ğŸ“¦ Zainstaluj biblioteki
      run: pip install atproto
    
    - name: ğŸ¤– Uruchom bota finansowego
      env:
        BLUESKY_HANDLE: ${{ secrets.BLUESKY_HANDLE }}
        BLUESKY_PASSWORD: ${{ secrets.BLUESKY_PASSWORD }}
      run: |
        echo "ğŸš€ Rozpoczynam bota..."
        python finance_growth_bot.py
        echo "âœ… Bot zakoÅ„czyÅ‚ pracÄ™"
    
    - name: ğŸ“Š Zapisz statystyki
      if: always()
      uses: actions/upload-artifact@v4
      with:
        name: bot-statistics
        path: |
          finance_bot_stats.json
          posted_comments.json
        retention-days: 30
    
    - name: ğŸ“ˆ Podsumowanie
      if: always()
      run: |
        echo "========================================"
        echo "ğŸ¤– BOT ZAKOÅƒCZYÅ PRACÄ˜ - PODSUMOWANIE"
        echo "========================================"
        echo ""
        
        # PokaÅ¼ podstawowe statystyki
        if [ -f "finance_bot_stats.json" ]; then
          echo "ğŸ“Š STATYSTYKI Z PLIKU:"
          echo "----------------------"
          cat finance_bot_stats.json
          echo ""
        fi
        
        echo "ğŸ“ CO ZROBIÄ† DALEJ:"
        echo "-------------------"
        echo "1. Pobierz 'bot-statistics' z sekcji Artifacts"
        echo "2. SprawdÅº konto Bluesky - nowe komentarze"
        echo "3. Monitoruj ruch na payhip.com/daveprime"
        echo ""
        echo "ğŸ•’ NASTÄ˜PNE URUCHOMIENIE:"
        echo "-------------------------"
        echo "- 9 AM EST (14:00 UTC) - za $(($((14 - $(date -u +%H))) % 24))h"
        echo "- 1 PM EST (18:00 UTC) - za $(($((18 - $(date -u +%H))) % 24))h"
        echo "- 5 PM EST (22:00 UTC) - za $(($((22 - $(date -u +%H))) % 24))h"
        echo ""
        echo "ğŸ”— TWÃ“J SKLEP: https://www.payhip.com/daveprime"
